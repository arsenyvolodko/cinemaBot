## Cinema Bot

`telegram` `bots` `aiogram` `aiohttp` `asyncio`

### Общее описание
Телеграм бот, который предоставляет возможность находить фильмы на различных интернет-ресурсах для онлайн-просмотра. Также сохраняет историю поиска и статистику для каждого пользователя.

### Поддерживаемые команды
- `/start` - приветствие
- `/help` - описание команд и их использования
- `/history` - вывод истории поиска (сохраняет корректно найденные фильмы)
- `/stats` - вывод статистики поиска (количество предложений каждого фильма)
- `/menu` - вывод меню с кнопками для удобства пользования ботом

### Использованные библиотеки
- `aiogram`, `aiohttp`, `asyncio`, `async_cse` - для поддержания асинхронной работы и отправки запросов к API
- `bs4` - для парсинга страницы с результатами поиска
- `psycopg2` - для работы с базой данных

### База данных
В качестве базы данных используется `PostgreSQL` на личном удаленном сервере. БД Содержит 4 таблицы:
1. `users` - информация о пользователях (user_id, username)
2. `history` - информация о поиске (user_id, film_id)
3. `films` - информация о фильмах (film_id, description, name, en_name, rating, poster, links)
4. `stats` - информация о статистике поиска (user_id, film_id, count)

### Пакетный менеджер
В качестве пакетного менеджера используется `poetry`.

### Хостинг
Бот и база данных развернуты на личном удаленном сервере.

### Принцип работы
1. Бот обращается к API кинопоиска при получении сообщения от пользователя и пытается найти фильм по названию.
2. Если фильм не найден, вероятно, его нет в базе кинопоиска.
3. Если фильм найден, бот получает подробную информацию о фильме и ссылки на онлайн-кинотеатры.
4. Если фильм недоступен, бот ищет на пиратском сайте sflix с использованием корректного английского названия и Google Search API для получения ссылок.
5. Информация о фильме сохраняется в базе данных, а также фиксируется история и статистика поиска для пользователя. Пользователю отправляется информация о фильме и ссылки на просмотр.
